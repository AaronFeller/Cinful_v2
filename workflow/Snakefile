import os
import sys

#from snakemake.utils import min_version
#set minimum snakemake version
#min_version("6.2.1")

# setup config
#configfile: "../config/config.yaml"

# setup report
#report: "report/workflow.rst"

# setup conda



# setup global wildcards
SAMPLES, = glob_wildcards("{sample}.fna")

#ROOT = 

# RULES TO INCLUDE
include: "rules/01_setup_inputs.smk"
include: "rules/02_ORF_finder.smk"
include: "rules/03_merge_ORFs.smk"
include: "rules/04_hmm_scan.smk"
include: "rules/05_merge_hmmscan.smk"


# No longer need to filter as this occurs in ORF_finder step (may remove later and reinstitute this rule for downstream gene finding)
#include: "rules/filter_microcin.smk" 

# No longer using Prodigal due to loss of ~30% of known microcins
#include: "rules/prodigal.smk"
#include: "rules/nonredundant_prodigal.smk"

# TARGET OUTPUT
rule final:
    input:
        config["outdir"] + "/results/hmmsearch/ss_hmmsearch_tblout.txt",
        config["outdir"] + "/results/hmmsearch/ss_hmmsearch.fa",
        config["outdir"] + "/results/hmmsearch/hmm_hits.csv",
#        config["outdir"] + "/results/ORFs/all_ORFs.faa",
#        config["outdir"] + "/results/ORFs/all_ORFs.csv",
        config["outdir"] + "/results/ORFs/all_AAs.faa"
